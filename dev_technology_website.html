<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev Technology - Premium Development Services</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            color: #333;
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, #dc143c 0%, #8b0000 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 20px rgba(220, 20, 60, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
        }

        .nav-item {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .cart-badge {
            background: #fff;
            color: #dc143c;
            border-radius: 50%;
            padding: 0.2rem 0.5rem;
            font-size: 0.8rem;
            position: absolute;
            top: -5px;
            right: -5px;
            min-width: 20px;
            text-align: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero {
            background: linear-gradient(135deg, #dc143c 0%, #8b0000 100%);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 3rem;
            box-shadow: 0 10px 40px rgba(220, 20, 60, 0.3);
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
            border-color: #dc143c;
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .team-member {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .team-member:hover {
            transform: translateY(-10px);
        }

        .team-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, #dc143c, #8b0000);
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        .form-container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #dc143c;
            box-shadow: 0 0 0 3px rgba(220, 20, 60, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #dc143c, #8b0000);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(220, 20, 60, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: #dc3545;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .product-card:hover {
            transform: translateY(-10px);
            border-color: #dc143c;
        }

        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #dc143c, #8b0000);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .product-content {
            padding: 1.5rem;
        }

        .product-price {
            font-size: 1.5rem;
            color: #dc143c;
            font-weight: bold;
            margin: 1rem 0;
        }

        .staff-dashboard {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        }

        .dashboard-section {
            margin-bottom: 3rem;
            padding: 1.5rem;
            border: 2px solid #f0f0f0;
            border-radius: 10px;
        }

        .dashboard-section h3 {
            color: #dc143c;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .account-list, .product-list, .order-list {
            max-height: 300px;
            overflow-y: auto;
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
        }

        .account-item, .product-item, .order-item {
            background: white;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            border-left: 4px solid #dc143c;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .invoice-display {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 3rem;
            text-align: center;
            border-radius: 20px;
            margin: 2rem 0;
            box-shadow: 0 10px 40px rgba(40, 167, 69, 0.3);
        }

        .invoice-id {
            font-size: 2rem;
            font-weight: bold;
            margin: 1rem 0;
            background: rgba(255, 255, 255, 0.2);
            padding: 1rem;
            border-radius: 10px;
            letter-spacing: 2px;
        }

        .search-container {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-container input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 10px;
        }

        .alert {
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            color: #155724;
        }

        .alert-error {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .product-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">Dev Technology</div>
            <nav class="nav-menu">
                <div class="nav-item" onclick="showPage('landing')">Home</div>
                <div class="nav-item" onclick="showPage('about')">About Us</div>
                <div class="nav-item" onclick="showPage('portal')">Customer Portal</div>
                <div class="nav-item" onclick="showPage('products')" id="products-nav">Products</div>
                <div class="nav-item" onclick="showPage('staff')" id="staff-nav">Staff Dashboard</div>
                <div class="nav-item" onclick="showCart()" id="cart-nav">
                    Cart <span class="cart-badge" id="cart-count">0</span>
                </div>
            </nav>
            <div class="user-info">
                <span id="user-display">Not logged in</span>
                <button class="btn" onclick="logout()" id="logout-btn" style="display: none;">Logout</button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Landing Page -->
        <div id="landing" class="page active">
            <div class="hero">
                <h1>Welcome to Dev Technology</h1>
                <p>Your premier destination for cutting-edge development services and premium digital solutions</p>
            </div>
            
            <div class="card">
                <h2>About Our Business</h2>
                <p>Dev Technology is a leading development company specializing in creating innovative digital solutions for businesses of all sizes. Our team of expert developers, designers, and consultants work tirelessly to deliver high-quality products that exceed expectations.</p>
                
                <p>We pride ourselves on our commitment to excellence, attention to detail, and customer satisfaction. Whether you need custom software development, web applications, or digital consulting, we have the expertise to bring your vision to life.</p>
            </div>

            <div class="card">
                <h2>Our Team</h2>
                <div class="team-grid">
                    <div class="team-member">
                        <div class="team-avatar">WO</div>
                        <h3>William Oyston</h3>
                        <p>Founder & CEO</p>
                        <p>Visionary leader with 10+ years in tech industry</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">DT</div>
                        <h3>Development Team</h3>
                        <p>Senior Developers</p>
                        <p>Expert programmers crafting innovative solutions</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">MT</div>
                        <h3>Management Team</h3>
                        <p>Operations Managers</p>
                        <p>Ensuring smooth project delivery and client satisfaction</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">CS</div>
                        <h3>Customer Support</h3>
                        <p>Support Specialists</p>
                        <p>Dedicated to providing excellent customer service</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Us Page -->
        <div id="about" class="page">
            <div class="hero">
                <h1>About Dev Technology</h1>
                <p>Learn more about our mission, values, and the team that makes it all possible</p>
            </div>

            <div class="card">
                <h2>Our Server Infrastructure</h2>
                <p>Dev Technology operates on state-of-the-art server infrastructure designed for maximum reliability and performance. Our servers are hosted in enterprise-grade data centers with 99.9% uptime guarantee, ensuring your projects are always accessible when you need them.</p>
                
                <p>Our infrastructure features:</p>
                <ul style="margin: 1rem 0; padding-left: 2rem;">
                    <li>High-performance cloud servers with auto-scaling capabilities</li>
                    <li>Advanced security protocols and regular security audits</li>
                    <li>24/7 monitoring and maintenance</li>
                    <li>Automated backup systems with point-in-time recovery</li>
                    <li>Global CDN for optimal performance worldwide</li>
                </ul>
            </div>

            <div class="card">
                <h2>Meet the Team</h2>
                <div class="team-grid">
                    <div class="team-member">
                        <div class="team-avatar">WO</div>
                        <h3>William Oyston</h3>
                        <p><strong>Founder & CEO</strong></p>
                        <p>William founded Dev Technology with a vision to revolutionize digital development services. With over a decade of experience in software engineering and business management, he leads our company with passion and expertise.</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">DL</div>
                        <h3>Directorship</h3>
                        <p><strong>Board of Directors</strong></p>
                        <p>Our board provides strategic guidance and oversight, ensuring Dev Technology maintains its commitment to innovation and excellence in all business operations.</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">MG</div>
                        <h3>Management</h3>
                        <p><strong>Operations Management</strong></p>
                        <p>Our management team coordinates project delivery, resource allocation, and client relationships to ensure every project exceeds expectations.</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">CS</div>
                        <h3>Customer Support</h3>
                        <p><strong>Support Team</strong></p>
                        <p>Our dedicated support team is available around the clock to assist with any questions, technical issues, or service requests from our valued clients.</p>
                    </div>
                    <div class="team-member">
                        <div class="team-avatar">DV</div>
                        <h3>Development Team</h3>
                        <p><strong>Senior Developers</strong></p>
                        <p>Our skilled developers are experts in the latest technologies and frameworks, delivering high-quality, scalable solutions for businesses worldwide.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Portal -->
        <div id="portal" class="page">
            <div class="form-container">
                <h2 style="text-align: center; color: #dc143c; margin-bottom: 2rem;">Customer Portal</h2>
                
                <div id="login-form">
                    <h3 style="margin-bottom: 1rem;">Login</h3>
                    <div class="form-group">
                        <label for="login-username">Username</label>
                        <input type="text" id="login-username" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" placeholder="Enter your password">
                    </div>
                    <button class="btn" onclick="login()" style="width: 100%; margin-bottom: 1rem;">Login</button>
                    <p style="text-align: center;">
                        Don't have an account? 
                        <span style="color: #dc143c; cursor: pointer; text-decoration: underline;" onclick="showRegisterForm()">Create Account</span>
                    </p>
                </div>

                <div id="register-form" class="hidden">
                    <h3 style="margin-bottom: 1rem;">Create Account</h3>
                    <div class="form-group">
                        <label for="reg-username">Username</label>
                        <input type="text" id="reg-username" placeholder="Choose a username">
                    </div>
                    <div class="form-group">
                        <label for="reg-discord">Discord Username</label>
                        <input type="text" id="reg-discord" placeholder="Your Discord username">
                    </div>
                    <div class="form-group">
                        <label for="reg-password">Password</label>
                        <input type="password" id="reg-password" placeholder="Choose a password">
                    </div>
                    <button class="btn" onclick="register()" style="width: 100%; margin-bottom: 1rem;">Create Account</button>
                    <p style="text-align: center;">
                        Already have an account? 
                        <span style="color: #dc143c; cursor: pointer; text-decoration: underline;" onclick="showLoginForm()">Login</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Products Page -->
        <div id="products" class="page">
            <div class="hero">
                <h1>Our Products</h1>
                <p>Explore our premium development services and digital solutions</p>
            </div>
            
            <div id="products-container" class="product-grid">
                <!-- Products will be dynamically loaded here -->
            </div>
        </div>

        <!-- Checkout Page -->
        <div id="checkout" class="page">
            <div id="checkout-content">
                <!-- Checkout content will be dynamically loaded -->
            </div>
        </div>

        <!-- Staff Dashboard -->
        <div id="staff" class="page">
            <div class="form-container" id="staff-login">
                <h2 style="text-align: center; color: #dc143c; margin-bottom: 2rem;">Staff Login</h2>
                <div class="form-group">
                    <label for="staff-username">Staff Username</label>
                    <input type="text" id="staff-username" placeholder="Enter staff username">
                </div>
                <div class="form-group">
                    <label for="staff-password">Staff Password</label>
                    <input type="password" id="staff-password" placeholder="Enter staff password">
                </div>
                <button class="btn" onclick="staffLogin()" style="width: 100%;">Login</button>
            </div>

            <div class="staff-dashboard hidden" id="staff-dashboard">
                <h2 style="color: #dc143c; margin-bottom: 2rem;">Staff Dashboard</h2>
                
                <!-- Product Management -->
                <div class="dashboard-section">
                    <h3>Product Management</h3>
                    <div class="form-group">
                        <label for="product-name">Product Name</label>
                        <input type="text" id="product-name" placeholder="Enter product name">
                    </div>
                    <div class="form-group">
                        <label for="product-description">Description</label>
                        <input type="text" id="product-description" placeholder="Enter product description">
                    </div>
                    <div class="form-group">
                        <label for="product-price">Price (Robux)</label>
                        <input type="number" id="product-price" placeholder="Enter price in Robux">
                    </div>
                    <div class="form-group">
                        <label for="product-image">Image URL</label>
                        <input type="text" id="product-image" placeholder="Enter image URL">
                    </div>
                    <button class="btn" onclick="addProduct()">Add Product</button>
                    
                    <div class="product-list" id="staff-products-list">
                        <!-- Staff products list -->
                    </div>
                </div>

                <!-- Customer Accounts -->
                <div class="dashboard-section">
                    <h3>Customer Accounts</h3>
                    <div class="account-list" id="customer-accounts">
                        <!-- Customer accounts will be listed here -->
                    </div>
                </div>

                <!-- Order Search -->
                <div class="dashboard-section">
                    <h3>Order Search</h3>
                    <div class="search-container">
                        <input type="text" id="invoice-search" placeholder="Enter Invoice ID">
                        <button class="btn" onclick="searchOrder()">Search</button>
                    </div>
                    <div id="order-results"></div>
                </div>

                <!-- All Orders -->
                <div class="dashboard-section">
                    <h3>All Orders</h3>
                    <div class="order-list" id="all-orders">
                        <!-- All orders will be listed here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Global Data Storage
        let globalData = {
            users: [],
            staffCredentials: {
                "WilliamOyston": "WilliamIsCool",
                "Directorship": "Directorship12",
                "Management": "Managers",
                "CustomerSupport": "CSOT",
                "Devs": "OgDevs"
            },
            products: [
                {
                    id: 1,
                    name: "Custom Website Development",
                    description: "Professional website development tailored to your needs",
                    price: 5000,
                    image: "https://via.placeholder.com/300x200/dc143c/white?text=Website+Dev"
                },
                {
                    id: 2,
                    name: "Mobile App Development",
                    description: "Cross-platform mobile applications for iOS and Android",
                    price: 8000,
                    image: "https://via.placeholder.com/300x200/dc143c/white?text=Mobile+App"
                },
                {
                    id: 3,
                    name: "E-commerce Solution",
                    description: "Complete online store with payment integration",
                    price: 6500,
                    image: "https://via.placeholder.com/300x200/dc143c/white?text=E-commerce"
                }
            ],
            orders: [],
            currentUser: null,
            currentStaff: null,
            cart: []
        };

        // Page Navigation
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation visibility
            updateNavVisibility();
            
            // Load page-specific content
            if (pageId === 'products') {
                loadProducts();
            } else if (pageId === 'staff') {
                loadStaffDashboard();
            }
        }

        function updateNavVisibility() {
            const productsNav = document.getElementById('products-nav');
            const staffNav = document.getElementById('staff-nav');
            const cartNav = document.getElementById('cart-nav');
            
            if (globalData.currentUser) {
                productsNav.style.display = 'block';
                cartNav.style.display = 'block';
            } else {
                productsNav.style.display = 'none';
                cartNav.style.display = 'none';
            }
        }

        // Authentication Functions
        function showRegisterForm() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.remove('hidden');
        }

        function showLoginForm() {
            document.getElementById('register-form').classList.add('hidden');
            document.getElementById('login-form').classList.remove('hidden');
        }

        function register() {
            const username = document.getElementById('reg-username').value;
            const discord = document.getElementById('reg-discord').value;
            const password = document.getElementById('reg-password').value;
            
            if (!username || !discord || !password) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            // Check if username already exists
            if (globalData.users.find(user => user.username === username)) {
                showAlert('Username already exists', 'error');
                return;
            }
            
            // Create new user
            const newUser = {
                id: Date.now(),
                username: username,
                discord: discord,
                password: password,
                createdAt: new Date()
            };
            
            globalData.users.push(newUser);
            showAlert('Account created successfully! Please login.', 'success');
            showLoginForm();
            
            // Clear form
            document.getElementById('reg-username').value = '';
            document.getElementById('reg-discord').value = '';
            document.getElementById('reg-password').value = '';
        }

        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            if (!username || !password) {
                showAlert('Please fill in all fields', 'error');
                return;
            }
            
            // Find user
            const user = globalData.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                globalData.currentUser = user;
                document.getElementById('user-display').textContent = `Welcome, ${user.username}`;
                document.getElementById('logout-btn').style.display = 'block';
                updateNavVisibility();
                showAlert('Login successful!', 'success');
                showPage('landing');
            } else {
                showAlert('Invalid username or password', 'error');
            }
        }

        function logout() {
            globalData.currentUser = null;
            globalData.cart = [];
            updateCartDisplay();
            document.getElementById('user-display').textContent = 'Not logged in';
            document.getElementById('logout-btn').style.display = 'none';
            updateNavVisibility();
            showAlert('Logged out successfully', 'success');
            showPage('landing');
        }

        function staffLogin() {
            const username = document.getElementById('staff-username').value;
            const password = document.getElementById('staff-password').value;
            
            if (globalData.staffCredentials[username] === password) {
                globalData.currentStaff = username;
                document.getElementById('staff-login').classList.add('hidden');
                document.getElementById('staff-dashboard').classList.remove('hidden');
                loadStaffDashboard();
                showAlert('Staff login successful!', 'success');
            } else {
                showAlert('Invalid staff credentials', 'error');
            }
        }

        // Product Functions
        function loadProducts() {
            if (!globalData.currentUser) {
                document.getElementById('products-container').innerHTML = '<div class="card"><h2>Please login to view products</h2></div>';
                return;
            }
            
            const container = document.getElementById('products-container');
            container.innerHTML = '';
            
            globalData.products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">${product.name}</div>
                    <div class="product-content">
                        <h3>${product.name}</h3>
                        <p>${product.description}</p>
                        <div class="product-price">${product.price} Robux</div>
                        <button class="btn" onclick="addToCart(${product.id})">Add to Cart</button>
                    </div>
                `;
                container.appendChild(productCard);
            });
        }

        function addToCart(productId) {
            const product = globalData.products.find(p => p.id === productId);
            if (product) {
                const existingItem = globalData.cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    globalData.cart.push({ ...product, quantity: 1 });
                }
                updateCartDisplay();
                showAlert(`${product.name} added to cart!`, 'success');
            }
        }

        function updateCartDisplay() {
            const cartCount = globalData.cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = cartCount;
        }

        function showCart() {
            if (!globalData.currentUser) {
                showAlert('Please login to view cart', 'error');
                return;
            }
            
            if (globalData.cart.length === 0) {
                showAlert('Your cart is empty', 'error');
                return;
            }
            
            let cartHTML = `
                <div class="hero">
                    <h1>Your Cart</h1>
                </div>
                <div class="card">
            `;
            
            let total = 0;
            globalData.cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                cartHTML += `
                    <div class="cart-item" style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid #eee;">
                        <div>
                            <h4>${item.name}</h4>
                            <p>Price: ${item.price} Robux</p>
                            <p>Quantity: ${item.quantity}</p>
                        </div>
                        <div style="text-align: right;">
                            <p style="font-weight: bold;">${itemTotal} Robux</p>
                            <button class="btn btn-danger" onclick="removeFromCart(${index})" style="margin-top: 0.5rem;">Remove</button>
                        </div>
                    </div>
                `;
            });
            
            cartHTML += `
                    <div style="text-align: right; margin-top: 2rem; padding-top: 1rem; border-top: 2px solid #dc143c;">
                        <h2>Total: ${total} Robux</h2>
                        <button class="btn" onclick="checkout()" style="margin-top: 1rem; font-size: 1.2rem;">Proceed to Checkout</button>
                    </div>
                </div>
            `;
            
            document.getElementById('checkout-content').innerHTML = cartHTML;
            showPage('checkout');
        }

        function removeFromCart(index) {
            globalData.cart.splice(index, 1);
            updateCartDisplay();
            showCart(); // Refresh cart display
        }

        function checkout() {
            if (globalData.cart.length === 0) {
                showAlert('Cart is empty', 'error');
                return;
            }
            
            // Generate invoice ID
            const invoiceId = 'INV-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            
            // Create order
            const order = {
                id: invoiceId,
                userId: globalData.currentUser.id,
                username: globalData.currentUser.username,
                discord: globalData.currentUser.discord,
                items: [...globalData.cart],
                total: globalData.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                timestamp: new Date(),
                status: 'pending'
            };
            
            globalData.orders.push(order);
            
            // Send webhook (simulated)
            sendDiscordWebhook(order);
            
            // Clear cart
            globalData.cart = [];
            updateCartDisplay();
            
            // Show success page
            const checkoutHTML = `
                <div class="invoice-display">
                    <h1>ðŸŽ‰ Thank You for Your Purchase!</h1>
                    <p style="font-size: 1.2rem; margin: 1rem 0;">Your order has been successfully placed!</p>
                    <div class="invoice-id">Invoice ID: ${invoiceId}</div>
                    <p style="font-size: 1.1rem; margin: 2rem 0;">
                        Please join our Discord server to claim your products and get support.
                    </p>
                    <button class="btn" onclick="showPage('landing')" style="margin-top: 1rem;">Back to Home</button>
                </div>
                <div class="card">
                    <h3>Order Summary</h3>
                    ${order.items.map(item => `
                        <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee;">
                            <span>${item.name} x${item.quantity}</span>
                            <span>${item.price * item.quantity} Robux</span>
                        </div>
                    `).join('')}
                    <div style="display: flex; justify-content: space-between; padding: 1rem 0; border-top: 2px solid #dc143c; font-weight: bold; font-size: 1.2rem;">
                        <span>Total:</span>
                        <span>${order.total} Robux</span>
                    </div>
                </div>
            `;
            
            document.getElementById('checkout-content').innerHTML = checkoutHTML;
        }

        function sendDiscordWebhook(order) {
            // Simulated Discord webhook - In real implementation, this would send to actual Discord webhook
            console.log('Discord Webhook Sent:', {
                content: `ðŸ›’ **New Order Received!**\n\n**Invoice ID:** ${order.id}\n**Customer:** ${order.username} (${order.discord})\n**Total:** ${order.total} Robux\n\n**Items:**\n${order.items.map(item => `â€¢ ${item.name} x${item.quantity} - ${item.price * item.quantity} Robux`).join('\n')}\n\n**Timestamp:** ${order.timestamp.toLocaleString()}`
            });
            
            // In a real implementation, you would use fetch() to send to Discord webhook:
            // fetch('YOUR_DISCORD_WEBHOOK_URL', {
            //     method: 'POST',
            //     headers: { 'Content-Type': 'application/json' },
            //     body: JSON.stringify({
            //         content: webhookContent
            //     })
            // });
        }

        // Staff Functions
        function loadStaffDashboard() {
            if (!globalData.currentStaff) return;
            
            loadCustomerAccounts();
            loadStaffProductsList();
            loadAllOrders();
        }

        function addProduct() {
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const price = parseInt(document.getElementById('product-price').value);
            const image = document.getElementById('product-image').value;
            
            if (!name || !description || !price) {
                showAlert('Please fill in all product fields', 'error');
                return;
            }
            
            const newProduct = {
                id: Date.now(),
                name: name,
                description: description,
                price: price,
                image: image || `https://via.placeholder.com/300x200/dc143c/white?text=${encodeURIComponent(name)}`
            };
            
            globalData.products.push(newProduct);
            showAlert('Product added successfully!', 'success');
            
            // Clear form
            document.getElementById('product-name').value = '';
            document.getElementById('product-description').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-image').value = '';
            
            loadStaffProductsList();
        }

        function loadStaffProductsList() {
            const container = document.getElementById('staff-products-list');
            container.innerHTML = '';
            
            globalData.products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product-item';
                productDiv.innerHTML = `
                    <div>
                        <strong>${product.name}</strong><br>
                        <small>${product.description}</small><br>
                        <span style="color: #dc143c; font-weight: bold;">${product.price} Robux</span>
                    </div>
                    <button class="btn btn-danger" onclick="deleteProduct(${product.id})">Delete</button>
                `;
                container.appendChild(productDiv);
            });
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                globalData.products = globalData.products.filter(p => p.id !== productId);
                loadStaffProductsList();
                showAlert('Product deleted successfully!', 'success');
            }
        }

        function loadCustomerAccounts() {
            const container = document.getElementById('customer-accounts');
            container.innerHTML = '';
            
            globalData.users.forEach(user => {
                const userDiv = document.createElement('div');
                userDiv.className = 'account-item';
                userDiv.innerHTML = `
                    <div>
                        <strong>${user.username}</strong><br>
                        <small>Discord: ${user.discord}</small><br>
                        <small>Created: ${user.createdAt.toLocaleDateString()}</small>
                    </div>
                    <button class="btn btn-danger" onclick="deleteAccount(${user.id})">Delete Account</button>
                `;
                container.appendChild(userDiv);
            });
        }

        function deleteAccount(userId) {
            if (confirm('Are you sure you want to delete this account? This will also delete all associated orders.')) {
                globalData.users = globalData.users.filter(u => u.id !== userId);
                globalData.orders = globalData.orders.filter(o => o.userId !== userId);
                loadCustomerAccounts();
                loadAllOrders();
                showAlert('Account and associated orders deleted successfully!', 'success');
            }
        }

        function loadAllOrders() {
            const container = document.getElementById('all-orders');
            container.innerHTML = '';
            
            globalData.orders.forEach(order => {
                const orderDiv = document.createElement('div');
                orderDiv.className = 'order-item';
                orderDiv.innerHTML = `
                    <div>
                        <strong>Invoice: ${order.id}</strong><br>
                        <small>Customer: ${order.username} (${order.discord})</small><br>
                        <small>Total: ${order.total} Robux</small><br>
                        <small>Date: ${order.timestamp.toLocaleString()}</small><br>
                        <small>Items: ${order.items.map(item => `${item.name} x${item.quantity}`).join(', ')}</small>
                    </div>
                    <button class="btn btn-danger" onclick="deleteOrder('${order.id}')">Delete Order</button>
                `;
                container.appendChild(orderDiv);
            });
        }

        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                globalData.orders = globalData.orders.filter(o => o.id !== orderId);
                loadAllOrders();
                showAlert('Order deleted successfully!', 'success');
            }
        }

        function searchOrder() {
            const invoiceId = document.getElementById('invoice-search').value;
            const resultsContainer = document.getElementById('order-results');
            
            if (!invoiceId) {
                showAlert('Please enter an Invoice ID', 'error');
                return;
            }
            
            const order = globalData.orders.find(o => o.id === invoiceId);
            
            if (order) {
                resultsContainer.innerHTML = `
                    <div class="card" style="margin-top: 1rem;">
                        <h4>Order Found</h4>
                        <p><strong>Invoice ID:</strong> ${order.id}</p>
                        <p><strong>Customer:</strong> ${order.username}</p>
                        <p><strong>Discord:</strong> ${order.discord}</p>
                        <p><strong>Total:</strong> ${order.total} Robux</p>
                        <p><strong>Date:</strong> ${order.timestamp.toLocaleString()}</p>
                        <p><strong>Status:</strong> ${order.status}</p>
                        <h5>Items:</h5>
                        <ul>
                            ${order.items.map(item => `<li>${item.name} x${item.quantity} - ${item.price * item.quantity} Robux</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                resultsContainer.innerHTML = `
                    <div class="alert alert-error" style="margin-top: 1rem;">
                        No order found with Invoice ID: ${invoiceId}
                    </div>
                `;
            }
        }

        // Utility Functions
        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.textContent = message;
            
            // Insert at the top of the current page
            const activePage = document.querySelector('.page.active');
            activePage.insertBefore(alertDiv, activePage.firstChild);
            
            // Remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, 5000);
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateNavVisibility();
            updateCartDisplay();
            
            // Add some demo users for testing
            globalData.users.push({
                id: 1,
                username: 'demo',
                discord: 'demo#1234',
                password: 'demo',
                createdAt: new Date()
            });
        });

        // Handle Enter key for forms
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const activeElement = document.activeElement;
                if (activeElement.id === 'login-password') {
                    login();
                } else if (activeElement.id === 'reg-password') {
                    register();
                } else if (activeElement.id === 'staff-password') {
                    staffLogin();
                } else if (activeElement.id === 'invoice-search') {
                    searchOrder();
                }
            }
        });
    </script>
</body>
</html>